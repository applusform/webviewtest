<!DOCTYPE HTML >
<!--
	Created by ApplusForm.com on 2015.11.13

	Permission is granted to copy, distribute, modify under the terms of ApplusForm License.

	Copyright (C) 2015 ApplusForm.com. All rights reserved.
-->
<html>
<head>
	<title>WebView Test for Hybrid App</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" charset="utf-8" />
	<link rel="stylesheet" href="common.css">
	<script type="text/javascript" src="common.js"> </script>
	<script type="text/javascript">


		var tests = [
			"A01", "A02", "A03", "A04", "A05", "A06", "A07",
			"B01", "B02", "B03", "B04", "B05", "B06",
			"C11", "C12", "C13", "C14",
			"C21", "C22", "C23",
			"C31", "C32",
			"C41", 
			"C51",
			"D01", "D02",
			"E01", "E02",
			"F01",
			"G01",
			"H01",
			"I01",
		];

		// increase mVer when test item modified or deleted. (not added);
		var mVer = 4;
		function onInit() {
			document.getElementById("scriptDisabled").style.display = "none";

			if (typeof (localStorage) != "undefined" && localStorage != null) {
				if (localStorage.mVer) {
					if (localStorage.mVer != mVer) {
						localStorage.mVer = mVer;
						if (confirm("Some Tests are modified or deleted.\nReset all test result?")) {
							reset();
						}
					}
				} else {
					// first time
					localStorage.mVer = mVer;
					reset();
				}
			} else {
				log("Error : can't find 'localStorage' object.");
			}

			showTestResult();
		}

		function showTestResult() {

			var i;
			var total = tests.length;
			var pass = 0;
			var fail = 0;
			var na = 0;
			var nt = 0;

			for (i = 0; i < total; ++i) {
				var passFail = eval("localStorage." + tests[i]);
				if (passFail == "PASS")
					++pass;
				else if (passFail == "FAIL")
					++fail;
				else if (passFail == "NA")
					++na;
				else if (passFail == "AUTO")
					++nt;
				else if (passFail == "NT")
					++nt;
				else 
					++nt;
			}
			document.getElementById("totalCount").innerHTML = total;
			document.getElementById("passCount").innerHTML = pass;
			document.getElementById("failCount").innerHTML = fail;
			document.getElementById("ntCount").innerHTML = nt;
			document.getElementById("naCount").innerHTML = na;

			if (nt > 0) {
				document.getElementById("ntCount").style.color = "#ff0000";
			}


			//var coverage = document.getElementById("coverage");
			//coverage.innerHTML = parseInt(((pass + fail) / (total - na) * 1000), 10) / 10 + "% (" + (pass + fail) + "/" + (total - na) + ")";
			var passed = document.getElementById("passed");
			passed.innerHTML = parseInt(((pass) / (total - na) * 1000), 10) / 10 + "% (" + (pass) + "/" + (total - na) + ")";
		}

		function reset() {
			var i;
			var total = tests.length;
			for (i = 0; i < total; ++i) {
				var id = tests[i];
				localStorage.removeItem(id);
				var passFail = getDefault(id);
				if (passFail != null) {
					eval("localStorage." + id + "= '" + passFail + "'");
				}

				//eval("localStorage." + tests[i] + "= null");
			}
		}

		function resetConfirm() {
			if (confirm("Delete all test results.\nAre you sure?")) {
				reset();
				showTestResult();
			}
		}

		// prevent auto header
		document.useCustomHeader = true;
	</script>
</head>
<body >
	<h3>HybridApp WebView Test <span class="note"> for Android, iOS</span>
	<span class="note" style="text-align :right; width:100%; display:table">
		rev 3. 2015/11/18
	</span>
	</h3>
	<hr/>
	<div id="scriptDisabled" style="color:#ff0000;font-weight:bold;">Error : JavaScript is disabled.</div>
	<ul>
		<li>
			<a href="basicInfo.htm"> Basic information</a>
		</li>
		<li>
			HTML Tags
			<div class="menuItem">
				A. <a href="links.htm">Links</a>
			</div>
			<div class="menuItem">
				B. <a href="fileUpload.htm">File upload</a>
			</div>
			<div class="menuItem">
				C. <a href="fileDownload.htm">File download</a>
			</div>
			<div class="menuItem">
				D. <a href="video.htm">Video play</a>
			</div>
		</li>
		<li>
			JavaScript Objects
			<div class="menuItem">
				E. <a href="alert.htm">Alert dialog</a>
			</div>
			<div class="menuItem">
				F. <a href="localStorage.htm">Local storage</a>
			</div>
			<div class="menuItem">
				G. <a href="location.htm">Location</a>
			</div>
			<div class="menuItem">
				H. <a href="userMedia.htm">User Media</a>
			</div>
			<div class="menuItem">
				I. <a href="vibration.htm">Vibration</a>
			</div>
			</ul>
		</li>
	</ul>

	<hr />
	<span style="display:none;">
	Result: <!-- &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:showTestResult()" >refresh </a> --> 
	<br />
	</span>
	<div class="result">
	- Passed : <span class="emp1" id="passed"></span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<button onclick="resetConfirm()">reset</button><br /> 
	<!-- 
	- Coverage : <span class="emp1" id="coverage"></span> <br />
	-->
	- Total : <span class="emp1" id="totalCount"></span> <br />
	<br />
	<div class="passFail" style="display:inline-block;float:none;background:#a0ff80;">PASS</div> : <span class="emp1" id="passCount"></span><br />
	<div class="passFail" style="display:inline-block;float:none;background:#ffa0a0;">FAIL</div> : <span class="emp1" id="failCount"></span><br />
	<div class="passFail" style="display:inline-block;float:none;background:#ffffa0;">N/T</div> : <span class="emp1" id="ntCount"></span> (Not Tested yet. Select test decision manually.)<br />
	<div class="passFail" style="display:inline-block;float:none;background:#a0a0a0;">N/A</div> : <span class="emp1" id="naCount"></span> (Not Applicable on this OS.)<br />
	</div>

</body>
</html>
